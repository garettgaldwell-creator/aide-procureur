<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur de peines - Bureau du Procureur</title>
    <link rel="icon" type="image/png" href="logo.png">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <img src="logo.png" alt="Tennessee District Attorney - Davidson County" class="logo">
                <div class="header-text">
                    <h1>Assistant des peines</h1>
                    <p class="subtitle">Bureau du Procureur</p>
                </div>
            </div>
            <nav class="main-nav">
                <button class="nav-btn active" data-module="simulator">
                    <span class="icon">‚öñÔ∏è</span>
                    Simulateur de peines
                </button>
                <button class="nav-btn" data-module="codes">
                    <span class="icon">üìö</span>
                    Base juridique
                </button>
                <button class="nav-btn" data-module="procedures">
                    <span class="icon">üìã</span>
                    Proc√©dures
                </button>
                <button class="nav-btn" data-module="admin" style="margin-left: auto;">
                    <span class="icon">üîê</span>
                    Admin
                </button>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        
        <!-- MODULE 1: SIMULATEUR DE PEINES -->
        <section id="simulator" class="module active">
            <div class="module-header">
                <h2>Simulateur de peines et d'infractions</h2>
                <p>S√©lectionnez les infractions reproch√©es pour calculer automatiquement les r√©quisitions</p>
            </div>

            <div class="simulator-container">
                <!-- Sidebar: S√©lection des infractions -->
                <div class="infractions-panel">
                    <div class="panel-header">
                        <h3>Infractions</h3>
                        <input type="text" id="search-infractions" placeholder="üîç Rechercher une infraction..." class="search-input">
                    </div>
                    
                    <div class="infractions-categories" id="infractions-list">
                        <!-- G√©n√©r√© dynamiquement par JS -->
                    </div>
                </div>

                <!-- Main: Calculs et r√©sultats -->
                <div class="results-panel">
                    <div class="selected-infractions" id="selected-infractions">
                        <h3>Infractions retenues</h3>
                        <div id="selected-list" class="infraction-tags">
                            <p class="empty-state">Aucune infraction s√©lectionn√©e</p>
                        </div>
                    </div>

                    <!-- Modificateurs -->
                    <div class="modifiers-section">
                        <h3>Modificateurs de peine</h3>
                        <div class="modifiers-grid">
                            <label class="modifier-checkbox">
                                <input type="checkbox" id="recidive-1">
                                <span>R√©cidive (1√®re) - √ó2</span>
                            </label>
                            <label class="modifier-checkbox">
                                <input type="checkbox" id="recidive-2">
                                <span>R√©cidive (2√®me) - √ó3</span>
                            </label>
                            <label class="modifier-checkbox">
                                <input type="checkbox" id="mineur">
                                <span>Mineur (< 21 ans) - √∑2</span>
                            </label>
                            <label class="modifier-checkbox">
                                <input type="checkbox" id="cooperation">
                                <span>Coop√©ration - 25%</span>
                            </label>
                            <label class="modifier-checkbox">
                                <input type="checkbox" id="aveux">
                                <span>Aveux complets - 15%</span>
                            </label>
                            <label class="modifier-checkbox">
                                <input type="checkbox" id="trouble-psy">
                                <span>Trouble psychique - 33%</span>
                            </label>
                        </div>
                    </div>

                    <!-- R√©sultats -->
                    <div class="calculation-results">
                        <h3>R√©quisitions calcul√©es</h3>
                        
                        <div class="results-grid">
                            <div class="result-card">
                                <div class="result-label">Temps de prison</div>
                                <div class="result-value" id="prison-time">0 ans</div>
                                <div class="result-rp" id="prison-rp">(0 minutes RP)</div>
                            </div>

                            <div class="result-card">
                                <div class="result-label">Amendes</div>
                                <div class="result-value" id="fines">0 $</div>
                            </div>

                            <div class="result-card">
                                <div class="result-label">Cat√©gorie</div>
                                <div class="result-value" id="category">-</div>
                            </div>

                            <div class="result-card crpc-card" id="crpc-card" style="display: none;">
                                <div class="result-label">CRPC Possible ‚úì</div>
                                <div class="result-value" id="crpc-prison">0 ans</div>
                                <div class="result-rp" id="crpc-rp">(0 minutes RP)</div>
                                <div class="crpc-note">R√©duction maximale de 50%</div>
                            </div>
                        </div>

                        <div class="action-buttons">
                            <button class="btn-primary" id="export-pdf">
                                üìÑ Exporter les r√©quisitions
                            </button>
                            <button class="btn-secondary" id="reset-all">
                                üîÑ R√©initialiser
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- MODULE 2: BASE JURIDIQUE -->
        <section id="codes" class="module">
            <div class="module-header">
                <h2>Base juridique interactive</h2>
                <p>Consultation des codes et articles de loi</p>
            </div>

            <div class="codes-container">
                <div class="codes-sidebar">
                    <h3>Codes disponibles</h3>
                    <nav class="codes-nav">
                        <button class="code-btn active" data-code="penal">Code P√©nal</button>
                        <button class="code-btn" data-code="procedure-penale">Code de Proc√©dure P√©nale</button>
                        <button class="code-btn" data-code="civil">Code Civil</button>
                        <button class="code-btn" data-code="procedure-civile">Code de Proc√©dure Civile</button>
                        <button class="code-btn" data-code="commerce">Code du Commerce</button>
                        <button class="code-btn" data-code="route">Code de la Route</button>
                        <button class="code-btn" data-code="constitution">Constitution du Tennessee</button>
                        <button class="code-btn" data-code="jurisprudence">Jurisprudence</button>
                    </nav>
                </div>

                <div class="codes-content">
                    <div class="codes-search">
                        <input type="text" id="search-codes" placeholder="üîç Rechercher un article, mot-cl√©..." class="search-input">
                    </div>
                    <div id="code-display" class="code-display">
                        <!-- Contenu du code s√©lectionn√© -->
                    </div>
                </div>
            </div>
        </section>

        <!-- MODULE 3: PROC√âDURES -->
        <section id="procedures" class="module">
            <div class="module-header">
                <h2>Fiches proc√©durales</h2>
                <p>Guides et checklists pour les proc√©dures courantes</p>
            </div>

            <div class="procedures-grid">
                <div class="procedure-card" data-procedure="gav">
                    <h3>üëÆ Garde √† vue</h3>
                    <p>Dur√©e, droits, notifications</p>
                </div>
                <div class="procedure-card" data-procedure="perquisition">
                    <h3>üîç Perquisition</h3>
                    <p>Mandats, conditions, ex√©cution</p>
                </div>
                <div class="procedure-card" data-procedure="mandat">
                    <h3>üìú Mandats</h3>
                    <p>Arrestation, perquisition, types</p>
                </div>
                <div class="procedure-card" data-procedure="audience">
                    <h3>‚öñÔ∏è Audiences</h3>
                    <p>Comparution, proc√®s, appel</p>
                </div>
                <div class="procedure-card" data-procedure="crpc">
                    <h3>ü§ù CRPC</h3>
                    <p>Plaider-coupable, conditions</p>
                </div>
                <div class="procedure-card" data-procedure="miranda">
                    <h3>üì¢ Droits Miranda</h3>
                    <p>Notification, texte l√©gal</p>
                </div>
            </div>

            <div id="procedure-detail" class="procedure-detail" style="display: none;">
                <!-- Contenu de la proc√©dure s√©lectionn√©e -->
            </div>
        </section>

        <!-- MODULE 4: ADMINISTRATION -->
        <section id="admin" class="module">
            <div class="module-header">
                <h2>üîê Panneau d'administration</h2>
                <p>G√©rez les infractions, codes et apparence du site</p>
            </div>

            <!-- Login -->
            <div id="admin-login" class="admin-section">
                <div class="login-container">
                    <div class="login-icon">üîê</div>
                    <h3>Acc√®s Administrateur</h3>
                    <p class="login-subtitle">Authentification requise</p>
                    <input type="password" id="admin-password" placeholder="Mot de passe" class="admin-input">
                    <button id="admin-login-btn" class="btn-primary">
                        <span>üîì Se connecter</span>
                    </button>
                </div>
            </div>

            <!-- Admin Panel (cach√© par d√©faut) -->
            <div id="admin-panel" class="admin-section" style="display: none;">
                
                <!-- Tabs -->
                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="infractions">üìù G√©rer les infractions</button>
                    <button class="admin-tab" data-tab="appearance">üé® Apparence</button>
                    <button class="admin-tab" data-tab="export">üíæ Sauvegarde</button>
                    <button class="admin-tab" data-tab="settings">‚öôÔ∏è Param√®tres</button>
                </div>

                <!-- Tab Content -->
                <div class="admin-content">
                    
                    <!-- ONGLET INFRACTIONS -->
                    <div id="tab-infractions" class="admin-tab-content active">
                        <h3>Gestion des infractions</h3>
                        
                        <div class="admin-controls">
                            <select id="admin-code-select" class="admin-select">
                                <option value="penal">Code P√©nal</option>
                                <option value="route">Code de la Route</option>
                            </select>
                            
                            <select id="admin-category-select" class="admin-select">
                                <option value="">S√©lectionnez une cat√©gorie...</option>
                            </select>
                            
                            <button id="admin-add-infraction-btn" class="btn-primary">+ Ajouter une infraction</button>
                        </div>

                        <div id="admin-infractions-list" class="admin-list">
                            <!-- Liste des infractions √©ditables -->
                        </div>

                        <!-- Modal d'√©dition -->
                        <div id="edit-modal" class="modal" style="display: none;">
                            <div class="modal-content">
                                <span class="modal-close">&times;</span>
                                <h3 id="modal-title">√âditer l'infraction</h3>
                                
                                <div class="form-group">
                                    <label>Nom de l'infraction</label>
                                    <input type="text" id="edit-name" class="admin-input">
                                </div>
                                
                                <div class="form-group">
                                    <label>Article</label>
                                    <input type="text" id="edit-article" class="admin-input">
                                </div>
                                
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Prison (ann√©es)</label>
                                        <input type="number" id="edit-prison" class="admin-input" step="0.25">
                                    </div>
                                    
                                    <div class="form-group">
                                        <label>Prison RP (minutes)</label>
                                        <input type="number" id="edit-prison-rp" class="admin-input">
                                    </div>
                                </div>
                                
                                <div class="form-group">
                                    <label>Amende ($)</label>
                                    <input type="number" id="edit-amende" class="admin-input">
                                </div>
                                
                                <div class="form-group">
                                    <label>Cat√©gorie</label>
                                    <select id="edit-category" class="admin-select">
                                        <option value="Crime">Crime</option>
                                        <option value="D√©lit">D√©lit</option>
                                        <option value="Contravention">Contravention</option>
                                        <option value="D√©lit routier">D√©lit routier</option>
                                        <option value="Contravention 1√®re classe">Contravention 1√®re classe</option>
                                        <option value="Contravention 2√®me classe">Contravention 2√®me classe</option>
                                        <option value="Contravention 3√®me classe">Contravention 3√®me classe</option>
                                        <option value="Contravention 4√®me classe">Contravention 4√®me classe</option>
                                        <option value="Contravention 5√®me classe">Contravention 5√®me classe</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label>Description</label>
                                    <textarea id="edit-description" class="admin-textarea"></textarea>
                                </div>
                                
                                <div class="modal-actions">
                                    <button id="save-infraction" class="btn-primary">üíæ Enregistrer</button>
                                    <button id="delete-infraction" class="btn-danger">üóëÔ∏è Supprimer</button>
                                    <button class="btn-secondary modal-close">Annuler</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ONGLET APPARENCE -->
                    <div id="tab-appearance" class="admin-tab-content">
                        <h3>Personnalisation de l'apparence</h3>
                        
                        <div class="color-editor">
                            <div class="form-group">
                                <label>üî¥ Couleur principale (Rouge)</label>
                                <input type="color" id="color-primary" value="#C8102E" class="color-input">
                                <input type="text" id="color-primary-text" value="#C8102E" class="admin-input">
                            </div>
                            
                            <div class="form-group">
                                <label>üîµ Couleur secondaire (Bleu)</label>
                                <input type="color" id="color-secondary" value="#002868" class="color-input">
                                <input type="text" id="color-secondary-text" value="#002868" class="admin-input">
                            </div>
                            
                            <div class="form-group">
                                <label>üü° Couleur accent (Or)</label>
                                <input type="color" id="color-accent" value="#F4E5C3" class="color-input">
                                <input type="text" id="color-accent-text" value="#F4E5C3" class="admin-input">
                            </div>
                            
                            <button id="apply-colors" class="btn-primary">‚ú® Appliquer les couleurs</button>
                            <button id="reset-colors" class="btn-secondary">üîÑ R√©initialiser</button>
                        </div>
                    </div>

                    <!-- ONGLET SAUVEGARDE -->
                    <div id="tab-export" class="admin-tab-content">
                        <h3>Sauvegarde et restauration</h3>
                        
                        <div class="backup-section">
                            <div class="backup-card">
                                <h4>üíæ Exporter la base de donn√©es</h4>
                                <p>T√©l√©chargez toutes les infractions en JSON</p>
                                <button id="export-data" class="btn-primary">T√©l√©charger data.js</button>
                            </div>
                            
                            <div class="backup-card">
                                <h4>üì§ Importer une base de donn√©es</h4>
                                <p>Remplacez les donn√©es actuelles</p>
                                <input type="file" id="import-data" accept=".js,.json" style="display: none;">
                                <button id="import-data-btn" class="btn-secondary">Choisir un fichier</button>
                            </div>
                            
                            <div class="backup-card">
                                <h4>üîÑ R√©initialiser</h4>
                                <p>Restaurer les donn√©es d'origine</p>
                                <button id="reset-data" class="btn-danger">‚ö†Ô∏è R√©initialiser tout</button>
                            </div>
                        </div>
                    </div>

                    <!-- ONGLET PARAM√àTRES -->
                    <div id="tab-settings" class="admin-tab-content">
                        <h3>Param√®tres du syst√®me</h3>
                        
                        <div class="settings-section">
                            <div class="form-group">
                                <label>üîê Changer le mot de passe admin</label>
                                <input type="password" id="new-password" class="admin-input" placeholder="Nouveau mot de passe">
                                <button id="change-password" class="btn-primary">Modifier</button>
                            </div>
                            
                            <div class="form-group">
                                <label>Modificateurs par d√©faut</label>
                                <div class="modifiers-settings">
                                    <div class="setting-item">
                                        <label>Coop√©ration (%):</label>
                                        <input type="number" id="setting-cooperation" value="25" min="0" max="100" class="admin-input-small">
                                    </div>
                                    <div class="setting-item">
                                        <label>Aveux (%):</label>
                                        <input type="number" id="setting-aveux" value="15" min="0" max="100" class="admin-input-small">
                                    </div>
                                    <div class="setting-item">
                                        <label>Trouble psy (%):</label>
                                        <input type="number" id="setting-trouble" value="33" min="0" max="100" class="admin-input-small">
                                    </div>
                                </div>
                                <button id="save-settings" class="btn-primary">üíæ Enregistrer</button>
                            </div>
                            
                            <div class="form-group">
                                <button id="logout-admin" class="btn-secondary">üö™ D√©connexion</button>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="main-footer">
        <p>Bureau du Procureur - Davidson County | Assistant des peines v1.0</p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="data.js"></script>
    <script src="app.js"></script>
    <script src="admin.js"></script>
</body>
</html>
